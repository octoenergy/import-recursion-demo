# Import Recursion Demo

This repository demonstrates how max recursion depth errors are triggered by long chains of imports in a Python project.

# System dependencies

This project requires [uv](https://docs.astral.sh/uv/) to be installed.

# Generation script

Demo python projects are generated by the `generate_project.py` script. This can be run as follows:

```
uv run generate_project.py
```

## Generated project structure

The generated project has this structure:

```
demo
├── __init__.py
├── main.py
├── mod_001.py
├── mod_002.py
├── mod_003.py
├── ...
└── mod_nnn.py
```

Where nnn is the import chain length.

The entry point is `main.py`. This sets the max recursion limit and then imports `mod_001.py`.

Each numbered module imports the module named with the next number. For example, `mod_010.py`
would import `mod_011.py`. The final module to be imported prints a message.

## Optional arguments

- `--project-name`: The name of the project, created under src/{project_name}. If a project of that name
                      already exists, it will be overwritten. Default: `demo`.
- `--chain-length`: The length of the import chain triggered by running main.py. Default: 150.
- `--recursion-limit`: The Python recursion limit that will be set before triggering the import chain. Default: 1000.

# Triggering the import chain

Once a project has been generated, run it using `uv run src/{project_name}/main.py`. 

Depending on the values of the recursion limit and chain length, `RecursionError` may be raised. The number of the
module from which the error was raised shows how long the import chain was before the recursion limit was hit.
